{{assert
      'ContributorList::UnregisteredContributor @contributor must be unregistered and @nodeId is required!'
      (and @contributor.unregisteredContributor @nodeId)
}}

<span
    role='button'
    {{on 'click' this.showDialog}}
    data-analytics-name='Open claim unregistered user dialog'
>
    <BsPopover
        @placement='top'
        @triggerEvents='hover'
        @title={{t 'contributor_list.unregistered_contributor.popover_title'}}
    >
        {{t 'contributor_list.unregistered_contributor.tooltip_message'}}
    </BsPopover>
    {{~@contributor.unregisteredContributor~}}
</span>

<OsfDialog
    @isOpen={{this.shouldOpenClaimDialog}}
    @onClose={{this.closeDialog}}
    as |dialog|
>
    <dialog.heading>
        {{#if this.isLoggedIn}}
            {{t 'contributor_list.unregistered_contributor.loggedInClaimHeader' email=@contributor.email}}
        {{else}}
            {{t 'contributor_list.unregistered_contributor.loggedOutClaimHeader' userFullName=@contributor.unregisteredContributor}}
        {{/if}}
    </dialog.heading>
    <dialog.main>
        {{#if this.isLoggedIn}}
            {{t 'contributor_list.unregistered_contributor.loggedInClaimMain'}}
        {{else}}
            <label local-class='emailLabel'>
                {{t 'contributor_list.unregistered_contributor.enterEmail'}}
                <Input
                    local-class='emailInput'
                    @placeholder={{t 'contributor_list.unregistered_contributor.emailPlaceholder'}}
                    @value={{get this.emailChangeset 'userEmail'}}
                />
                <ValidationErrors
                    @changeset={{this.emailChangeset}}
                    @key='userEmail'
                />
            </label>
        {{/if}}
    </dialog.main>
    <dialog.footer>
        <Button
            data-analytics-name='Cancel claim unregistered user'
            @type='secondary'
            {{on 'click' dialog.close}}
        >
            {{t 'general.cancel'}}
        </Button>
        <Button
            data-analytics-name='Claim unregistered user'
            disabled={{this.isClaimButtonDisabled}}
            @type='primary'
            {{on 'click' (perform this.claimContributor)}}
        >
            {{t 'contributor_list.unregistered_contributor.claim'}}
        </Button>
    </dialog.footer>
</OsfDialog>
