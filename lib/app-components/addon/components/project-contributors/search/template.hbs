<form {{action (perform this.search) on='submit'}}>
    <div class='input-group' local-class='author-search-box'>
        <Input
            @value={{this.query}}
            @class='form-control'
            @placeholder={{t 'app_components.project_contributors.search.placeholder'}}
        />
        <span class='input-group-btn'>
            <button
                class='btn btn-default'
                local-class='authors-search-button'
                type='submit'
            >
                <i class='glyphicon glyphicon-search'></i>
            </button>
        </span>
    </div>
</form>

{{#if this.showUnregisteredForm}}
    <ProjectContributors::Search::UnregisteredContributor
        @node={{@node}}
        @closeForm={{action (mut this.showUnregisteredForm) false}}
    />
{{else if this.results.isLoaded}}
    <div class='text-center' local-class='unregisteredUsers'>
        <p>{{t 'app_components.project_contributors.search.unregistered_description'}}</p>
        <button
            class='btn btn-primary btn-small'
            {{action (mut this.showUnregisteredForm) true}}
        >
            {{t 'app_components.project_contributors.search.unregistered_button'}}
        </button>
    </div>
    <h3>
        {{t 'app_components.project_contributors.search.results'}}
    </h3>
    {{#if this.search.isRunning}}
        <div class='text-center'>
            <FaIcon @icon='spinner' @pulse={{true}} @size={{2}} />
        </div>
    {{else if this.results.length}}
        <table class='table author-table'>
            {{#each this.results as |result|}}
                <ProjectContributors::Search::Result
                    @user={{result}}
                    @contributors={{@contributors}}
                    @addContributor={{action (perform this.addContributor)}}
                />
            {{/each}}
        </table>
        <div class='pull-right text-right'>
            <SearchPaginator
                @pageChanged={{action (perform this.search)}}
                @current={{this.page}}
                @maximum={{this.totalPages}}
            />
        </div>
    {{else}}
        {{t 'app_components.project_contributors.search.no_results'}}
    {{/if}}
{{/if}}
