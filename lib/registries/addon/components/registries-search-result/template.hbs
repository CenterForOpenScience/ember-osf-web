<div class="row">
    <div class="col-xs-12">
        {{#if result.mainLink}}
            {{#sharing-icons/popover resultId=result.id}}
                {{sharing-icons
                    title=result.title
                    description=result.description
                    hyperlink=result.mainLink
                    resultId=result.id
                }}
            {{/sharing-icons/popover}}
        {{/if}}
        <h4 local-class="RegistriesSearchResult__Title">
            {{#if osfID}}
                {{#link-to-external 'registration' osfID data-test-result-title-id=result.id}}
                    {{unescape-xml-entities result.title}}
                {{/link-to-external}}
            {{else}}
                <a
                    href="{{result.mainLink}}"
                    data-test-result-title-id="{{result.id}}"
                    onclick={{action 'click' 'link' (concat 'Discover - Result Title: ' result.mainLink) result.id target=analytics}}
                >
                    {{unescape-xml-entities result.title}}
                </a>
            {{/if}}

            {{#if result.withdrawn}}
                <span class="label label-default">{{t 'registries.discover.search_result.withdrawn'}}</span>
            {{/if}}
        </h4>

        {{#comma-list result.contributors filter=contribFilter as |contrib|}}
            {{contrib.users.citedAs}}
        {{/comma-list}}

        {{#if result.dateUpdated}}
            <div class="m-t-sm">
                <em> {{t 'registries.discover.search_result.last_edited' date=(moment-format (utc result.dateUpdated) 'MMMM D, YYYY UTC')}}</em>
            </div>
        {{/if}}

        <p local-class="RegistriesSearchResult__Description" class="text-muted m-t-sm">
            {{#if expanded}}
                {{unescape-xml-entities result.description}}
            {{else}}
                {{clip (unescape-xml-entities result.description) 300}}
            {{/if}}
        </p>

        <div class="m-t-sm">
            <span local-class="RegistriesSearchResult__Sources">
                {{#each result.sources as |source index|}}
                    {{if index '| '}}{{source}}
                {{/each}}

                {{#if result.registrationType}}
                    | {{result.registrationType}}
                {{/if}}
            </span>
        </div>

        {{#if expanded}}
            <ul local-class="RegistriesSearchResult__HyperLinks" class="m-t-sm">
                {{#each result.hyperLinks as |hyperlink index|}}
                    <li>
                        <a 
                            href="{{hyperlink}}"
                            data-test-result-hyperlink-id="{{result.id}} - {{index}}"
                            onclick={{action 'click' 'link' (concat 'Discover - Result Hyperlink: ' hyperlink) result.id target=analytics}}
                        >
                            {{hyperlink}}
                        </a>
                    </li>
                {{/each}}
            </ul>

            <ul local-class="RegistriesSearchResult__InfoLinks">
                {{#each result.infoLinks as |infolink|}}
                    <li>
                        <b>{{infolink.type}}: </b>
                        {{infolink.uri}}
                    </li>
                {{/each}}
            </ul>

            {{#each result.tags as |tag|}}
                <span class="badge">{{tag}}</span>
            {{/each}}
        {{/if}}

        <div class="text-center">
            <button data-test-result-toggle-id="{{result.id}}" local-class="RegistriesSearchResult__Toggle" class="btn btn-link" aria-label={{t 'eosf.components.searchResult.showResult'}} {{action 'toggleExpanded'}}>
                {{fa-icon footerIcon size=1 ariaHidden=false}}
            </button>
        </div>

    </div>
</div>

