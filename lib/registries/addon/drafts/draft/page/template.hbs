{{title (t 'registries.drafts.draft.form.title')}}

{{#let
    this.draftRegistrationManager
    this.navigationManager
    as |draftManager navManager|
}}
    {{#if draftManager.initializing}}
        <LoadingIndicator @dark={{true}} />
    {{else}}
        <Drafts::Draft::Page::-Components::PageNavigation
            @currentPage={{this.pageIndex}}
            @draftManager={{draftManager}}
            @navManager={{navManager}}
            @updateRoute={{action this.updateRoute}}
            @onPageNotFound={{action this.onPageNotFound}}
        >
            <main
                {{did-insert (action draftManager.onPageChange) this.pageIndex}}
                {{did-update (action draftManager.onPageChange) this.pageIndex}}
            >
                {{#if navManager.currentPageManager}}
                    <Registries::PageRenderer
                        @pageManager={{navManager.currentPageManager}}
                        @onInput={{perform draftManager.onInput}}
                        @node={{this.node}}
                    />
                {{/if}}
            </main>
        </Drafts::Draft::Page::-Components::PageNavigation>
    {{/if}}
{{/let}}
