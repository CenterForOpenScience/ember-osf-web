<div data-test-topbar-states>
    <RegistriesStates @registration={{@registration}} />
</div>
<div data-test-topbar-share-bookmark-fork
    local-class='RightActionsContainer'
>
    <ResponsiveDropdown as |dd|>
        <dd.trigger
            data-test-forks-dropdown-button
            data-analytics-name='Expand fork dropdown'
            local-class='Action'
        >
            <FaIcon
                local-class='Icon'
                @icon='code-fork'
            />
            <BsTooltip
                @placement='top'
                @triggerEvents='hover'
            >
                {{t 'registries.overview.tooltips.fork'}}
            </BsTooltip>
        </dd.trigger>
        <dd.content>
            <div data-test-forks-dropdown-options local-class='ForksMenu'>
                <OsfLink
                    data-analytics-name='Go to forks page'
                    data-test-go-to-forks-view
                    @route='guid-registration.forks'
                    @models={{array @registration.id}}
                >
                    {{t 'registries.overview.view_forks'}}
                </OsfLink>
                <OsfButton
                    data-analytics-name='Fork registration'
                    data-test-fork-registration
                    @type='link'
                    @disabled={{this.forkRegistration.isRunning}}
                    @onClick={{action (perform this.forkRegistration (action dd.close))}}
                    local-class='ForkButton'
                >
                    {{t 'registries.overview.fork_registration'}}
                </OsfButton>
            </div>
        </dd.content>
    </ResponsiveDropdown>

    <OsfButton
        data-test-bookmarks-button
        data-analytics-name={{if this.isBookmarked 'Remove from bookmarks' 'Bookmark'}}
        data-analytics-extra='Registration ID: {{this.registration.id}}'
        @type='link'
        @onClick={{action (perform this.bookmark)}}
        @disabled={{or this.bookmark.isRunning @registration.isAnonymous}}
        local-class='ActionButton'
    >
        <FaIcon
            local-class='Icon'
            @icon='{{if this.isBookmarked 'bookmark' 'bookmark-o'}}'
        />
        <BsTooltip
            @placement='top'
            @triggerEvents='hover'
        >
            {{#if this.isBookmarked}}
                {{t 'registries.overview.tooltips.remove_bookmark'}}
            {{else}}
                {{t 'registries.overview.tooltips.bookmark'}}
            {{/if}}
        </BsTooltip>
    </OsfButton>

    <SharingIcons::Dropdown
        @title={{@registration.title}}
        @description={{@registration.description}}
        @hyperlink={{this.registrationURL}}
        @showText={{true}}
        @registration={{@registration}}
        as |dd|
    >
        <dd.trigger
            data-test-social-sharing-button
            data-analytics-name='Expand sharing menu'
            local-class='Action'
        >
            <FaIcon
                local-class='Icon'
                @icon='share-alt'
            />
            <BsTooltip
                @placement='top'
                @triggerEvents='hover'
            >
                {{t 'registries.overview.tooltips.share'}}
            </BsTooltip>
        </dd.trigger>
    </SharingIcons::Dropdown>
</div>
